<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Producto ‚Äî Pastas Nonna</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body{background:#f5f6f7;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
    .flag{height:8px;background:linear-gradient(90deg,#009246 33%,#fff 33% 66%,#ce2b37 66%)}
    .hero{background:#fff;border:1px solid #e5e5e5;border-radius:10px}
    .img-square{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:10px;border:1px solid #eee}
    #toastArea{position:fixed;top:16px;right:16px;z-index:1080}
    @media (max-width:576px){#toastArea{left:16px;right:16px}}
  </style>
</head>
<body>

<div class="flag"></div>

<div class="container-fluid">
  <!-- HEADER -->
  <div class="row hero my-2">
    <div class="col-12 d-flex justify-content-between align-items-center p-3">
      <strong>Pastas Nonna</strong>
      <div class="d-flex gap-3">
        <a href="catalogo.html" class="text-decoration-none">Cat√°logo</a>
        <a href="login.html" class="text-decoration-none">Login</a>
        <a href="admin.html" class="text-decoration-none">Admin</a>
      </div>
    </div>
  </div>

  <!-- CONTENIDO PRINCIPAL -->
  <div class="row mt-3 g-3">
    <!-- IMAGEN PRODUCTO -->
    <div class="col-12 col-md-6">
      <div class="hero p-2">
        <img id="prodImg" class="img-square" src="" alt="Producto">
      </div>
    </div>

    <!-- INFO PRODUCTO -->
    <div class="col-12 col-md-6">
      <div class="hero p-3">
        <div class="mb-3">
          <h3 id="prodNombre" class="mb-1">Nombre producto</h3>
          <div id="prodPrecio" class="fs-5 fw-semibold text-success">$0</div>
        </div>

        <div class="mb-3">
          <p id="prodDesc" class="mb-0 text-muted">Descripci√≥n del producto.</p>
        </div>

        <div class="d-grid gap-2">
          <button id="btnAdd" class="btn btn-success">A√±adir al carrito</button>
          <button id="btnPagar" class="btn btn-danger">Ir a pagar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="row hero mt-3">
    <div class="col-12 p-3 text-center">
      <small class="text-muted d-block">üçù Pastas Nonna ‚Äî Nonna Maria Rossi</small>
      <small class="text-muted d-block">üìû +56 9 5555 1234 ‚Äî üìß contacto@nonnapastas.cl</small>
    </div>
  </div>
</div>

<div class="flag mt-3"></div>

<!-- Toasts -->
<div id="toastArea"></div>

<script>
  // --- Datos base (mismos nombres/imagenes que tu cat√°logo) ---
  const productos = [
    {id:1, key:"spaghetti",   nombre:"Spaghetti",   tipo:"larga",   precio:4990, img:"img/spaghetti.png",   desc:"Cl√°sica pasta larga italiana, ideal con salsa de tomate o carbonara."},
    {id:2, key:"penne",       nombre:"Penne",       tipo:"corta",   precio:5490, img:"img/penne.png",       desc:"Tubo corto con bordes biselados; perfecta para salsas cremosas."},
    {id:3, key:"fusilli",     nombre:"Fusilli",     tipo:"corta",   precio:4790, img:"img/fusilli.png",     desc:"Espirales que atrapan la salsa en cada vuelta, textura deliciosa."},
    {id:4, key:"ravioli",     nombre:"Ravioli",     tipo:"rellena", precio:6990, img:"img/ravioli.png",     desc:"Pasta rellena (ricotta/espinaca o carne). Acompa√±a con mantequilla y salvia."},
    {id:5, key:"tagliatelle", nombre:"Tagliatelle", tipo:"larga",   precio:5990, img:"img/tagliatelle.png", desc:"Cintas largas y planas; combinan perfecto con rag√∫ a la bolognesa."},
    {id:6, key:"gnocchi",     nombre:"Gnocchi",     tipo:"rellena", precio:4990, img:"img/gnocchi.png",     desc:"Suaves √±oquis de papa; pru√©balos con pesto o salsa 4 quesos."},
    {id:7, key:"farfalle",    nombre:"Farfalle",    tipo:"corta",   precio:4690, img:"img/farfalle.png",    desc:"Con forma de mo√±itos; excelente para ensaladas de pasta."},
    {id:8, key:"linguine",    nombre:"Linguine",    tipo:"larga",   precio:5190, img:"img/linguine.png",    desc:"Similar a spaghetti pero m√°s plano; ideal con mariscos."},
    {id:9, key:"rigatoni",    nombre:"Rigatoni",    tipo:"corta",   precio:5490, img:"img/rigatoni.png",    desc:"Pasta acanalada de gran tama√±o, retiene muy bien salsas densas."}
  ];

  // --- Utilidad: leer ?item=... ---
  function getParam(key){
    const url = new URL(window.location.href);
    return url.searchParams.get(key);
  }

  // --- Cargar producto seg√∫n ?item=spaghetti ---
  const itemKey = (getParam('item') || '').toLowerCase();
  let prod = productos.find(p => p.key === itemKey);

  if(!prod){
    prod = {nombre:"Producto no encontrado", precio:0, img:"img/spaghetti.png", desc:"No se encontr√≥ el producto solicitado. Vuelve al cat√°logo.", id:null};
  }

  // Pintar datos
  document.getElementById('prodNombre').textContent = prod.nombre;
  document.getElementById('prodPrecio').textContent = `$${(prod.precio||0).toLocaleString()}`;
  document.getElementById('prodDesc').textContent   = prod.desc;
  document.getElementById('prodImg').src            = prod.img;
  document.getElementById('prodImg').alt            = prod.nombre;

  // --- Carrito (localStorage) ---
  const LS_KEY = "carrito";
  const getCart = () => JSON.parse(localStorage.getItem(LS_KEY) || "[]");
  const setCart = (c) => localStorage.setItem(LS_KEY, JSON.stringify(c));

  function addToCart(p){
    if(!p.id){ showToast("No es posible agregar este producto.","danger"); return; }
    const cart = getCart();
    const idx = cart.findIndex(x => x.id === p.id);
    if(idx > -1) cart[idx].cantidad += 1;
    else cart.push({id:p.id, nombre:p.nombre, precio:p.precio, img:p.img, cantidad:1});
    setCart(cart);
    showToast(`üõí ${p.nombre} a√±adido al carrito`, "success");
  }

  document.getElementById('btnAdd').onclick = ()=> addToCart(prod);
  document.getElementById('btnPagar').onclick = ()=> location.href = "pagos.html";

  // --- Toasts simples ---
  function showToast(msg, variant="primary"){
    const wrap = document.getElementById('toastArea');
    const el = document.createElement('div');
    el.className = `toast align-items-center text-bg-${variant} border-0 show mb-2`;
    el.innerHTML = `<div class="d-flex">
        <div class="toast-body">${msg}</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto"></button>
      </div>`;
    wrap.appendChild(el);
    setTimeout(()=>el.remove(), 2500);
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
